chipflow.platforms
==================

.. py:module:: chipflow.platforms

.. autoapi-nested-parse::

   Backward compatibility shim for platforms module.

   This module re-exports platform functionality from the platform module.
   New code should import directly from chipflow.platform instead.

   Platform definitions
   --------------------

   This module defines the functionality you use in your code to target the ChipFlow platform



Submodules
----------

.. toctree::
   :maxdepth: 1

   /chipflow-lib/autoapi/chipflow/platforms/silicon/index


Classes
-------

.. autoapisummary::

   chipflow.platforms.SiliconPlatformPort
   chipflow.platforms.IOSignature
   chipflow.platforms.IOModel
   chipflow.platforms.IOTripPoint
   chipflow.platforms.IOModelOptions
   chipflow.platforms.JTAGSignature
   chipflow.platforms.SPISignature
   chipflow.platforms.I2CSignature
   chipflow.platforms.UARTSignature
   chipflow.platforms.GPIOSignature
   chipflow.platforms.QSPIFlashSignature
   chipflow.platforms.SoftwareDriverSignature
   chipflow.platforms.SoftwareBuild
   chipflow.platforms.Sky130DriveMode


Functions
---------

.. autoapisummary::

   chipflow.platforms.OutputIOSignature
   chipflow.platforms.InputIOSignature
   chipflow.platforms.BidirIOSignature


Package Contents
----------------

.. py:class:: SiliconPlatformPort(name, port_desc)

   Bases: :py:obj:`amaranth.lib.io.PortLike`, :py:obj:`Generic`\ [\ :py:obj:`Pin`\ ]


   Represents an abstract library I/O port that can be passed to a buffer.

   The port types supported by most platforms are :class:`SingleEndedPort` and
   :class:`DifferentialPort`. Platforms may define additional port types where appropriate.

   .. note::

       :class:`amaranth.hdl.IOPort` is not an instance of :class:`amaranth.lib.io.PortLike`.


   .. py:property:: direction

      Direction of the port.

      :rtype: :class:`Direction`


.. py:class:: IOSignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   An :py:obj:`Amaranth Signature <amaranth.lib.wiring.Signature>` used to decorate wires that would usually be brought out onto a port on the package.
   This class is generally not directly used.  Instead, you would typically utilize the more specific
   :py:obj:`InputIOSignature`, :py:obj:`OutputIOSignature`, or :py:obj:`BidirIOSignature` for defining pin interfaces.


   .. py:property:: direction
      :type: amaranth.lib.io.Direction


      The direction of the IO port


   .. py:property:: width
      :type: int


      The width of the IO port, in wires


   .. py:property:: invert
      :type: collections.abc.Iterable[bool]


      A tuple as wide as the IO port, with a bool for the polarity inversion for each wire


   .. py:property:: options
      :type: IOModelOptions


      Options set on the io port at construction


.. py:class:: IOModel

   Bases: :py:obj:`IOModelOptions`


   Setting for IO Ports (see also base class :class:`IOModelOptions`).

   Attributes:
       direction: ``io.Direction.Input``, ``io.Direction.Output`` or ``io.Direction.Bidir``.
       width: Width of port, default is 1.


.. py:class:: IOTripPoint

   Bases: :py:obj:`enum.StrEnum`


   Models various options for trip points for inputs.
   Depending on process and cell library, these may be statically or dynamically configurable.

   You will get an error if the option is not available with the chosen process and cell library


.. py:class:: IOModelOptions

   Bases: :py:obj:`typing_extensions.TypedDict`


   Options for an IO pad/pin.

   Attributes:
       invert: Polarity inversion. If the value is a simple :class:`bool`, it specifies inversion for
           the entire port. If the value is an iterable of :class:`bool`, the iterable must have the
           same length as the width of ``io``, and the inversion is specified for individual wires.
       individual_oe: controls whether each output wire is associated with an individual Output Enable bit
           or if a single OE bit will be used for entire port. The default value is False (indicating that a
           single OE bit controls the entire port).
       power_domain: The name of the I/O power domain. NB there is only one of these, so IO with
           multiple power domains must be split up.
       clock_domain: the name of the I/O's clock domain (see ``amaranth.hdl.ClockDomain``). NB there
           is only one of these, so IO with multiple clocks must be split up.
       buffer_in: Should the IO pad have an input buffer?
       buffer_out: Should the IO pad have an output buffer?
       sky130_drive_mode: Drive mode for output buffer on sky130.
       trip_point: Trip Point configuration for input buffer.
       init: The value for the initial values of the port.
       init_oe: The value for the initial values of the output enable(s) of the port.


.. py:function:: OutputIOSignature(width, **kwargs)

   This creates an :py:obj:`Amaranth Signature <amaranth.lib.wiring.Signature>` which is then used to decorate package output signals
   intended for connection to the physical pads of the integrated circuit package.

   :param width: specifies the number of individual output wires within this port, each of which will correspond to a separate physical pad on the integrated circuit package.


.. py:function:: InputIOSignature(width, **kwargs)

   This creates an :py:obj:`Amaranth Signature <amaranth.lib.wiring.Signature>` which is then used to decorate package input signals
   intended for connection to the physical pads of the integrated circuit package.

   :param width: specifies the number of individual input wires within this port, each of which will correspond to a separate physical pad on the integrated circuit package.


.. py:function:: BidirIOSignature(width, **kwargs)

   This creates an :py:obj:`Amaranth Signature <amaranth.lib.wiring.Signature>` which is then used to decorate package bi-directional signals
   intended for connection to the physical pads of the integrated circuit package.

   :param width: specifies the number of individual input/output wires within this port. Each pair of input/output wires will correspond to a separate physical pad on the integrated circuit package.


.. py:class:: JTAGSignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: SPISignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: I2CSignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: UARTSignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: GPIOSignature(pin_count=1, **kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: QSPIFlashSignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: SoftwareDriverSignature(members, **kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   Description of an interface object.

   An interface object is a Python object that has a :py:`signature` attribute containing
   a :class:`Signature` object, as well as an attribute for every member of its signature.
   Signatures and interface objects are tightly linked: an interface object can be created out
   of a signature, and the signature is used when :func:`connect`\ ing two interface objects
   together. See the :ref:`introduction to interfaces <wiring-intro1>` for a more detailed
   explanation of why this is useful.

   :class:`Signature` can be used as a base class to define :ref:`customized <wiring-customizing>`
   signatures and interface objects.

   .. warning::

       :class:`Signature` objects are immutable. Classes inheriting from :class:`Signature` must
       ensure this remains the case when additional functionality is added.


.. py:class:: SoftwareBuild(*, sources, includes = [], include_dirs=[], offset=0)

   This holds the information needed for building software and providing the built outcome


.. py:class:: Sky130DriveMode

   Bases: :py:obj:`enum.StrEnum`


   Models the potential drive modes of an SkyWater 130 IO cell [sky130_fd_io__gpiov2](https://skywater-pdk.readthedocs.io/en/main/contents/libraries/sky130_fd_io/docs/user_guide.html)
   These are both statically configurable and can be set at runtime on the `:py:mod:drive_mode.Sky130Port` lines on the port.


