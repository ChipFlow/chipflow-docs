chipflow.steps
==============

.. py:module:: chipflow.steps

.. autoapi-nested-parse::

   Backward compatibility shim for steps module.

   This module re-exports step functionality from the platform module.
   New code should import directly from chipflow.platform instead.

   Steps provide an extensible way to modify the `chipflow` command behavior for a given design



Submodules
----------

.. toctree::
   :maxdepth: 1

   /chipflow-lib/autoapi/chipflow/steps/board/index
   /chipflow-lib/autoapi/chipflow/steps/silicon/index
   /chipflow-lib/autoapi/chipflow/steps/sim/index
   /chipflow-lib/autoapi/chipflow/steps/software/index


Classes
-------

.. autoapisummary::

   chipflow.steps.StepBase
   chipflow.steps.SiliconStep
   chipflow.steps.SimStep
   chipflow.steps.SoftwareStep
   chipflow.steps.BoardStep
   chipflow.steps.IOSignature


Functions
---------

.. autoapisummary::

   chipflow.steps.setup_amaranth_tools


Package Contents
----------------

.. py:class:: StepBase(config={})

   Bases: :py:obj:`abc.ABC`


   Base class for ChipFlow build steps.


   .. py:method:: build_cli_parser(parser)

      Build the cli parser for this step



   .. py:method:: run_cli(args)

      Called when this step's is used from `chipflow` command



   .. py:method:: build(*args)

      builds the design



.. py:function:: setup_amaranth_tools()

   Configure environment for Amaranth/WASM tools.


.. py:class:: SiliconStep(config)

   Step to Prepare and submit the design for an ASIC.


   .. py:method:: prepare()

      Elaborate the design and convert it to RTLIL.

      Returns the path to the RTLIL file.



   .. py:method:: submit(rtlil_path, args)

      Submit the design to the ChipFlow cloud builder.

      Options:
          --dry-run: Don't actually submit
          --wait: Wait until build has completed. Use '-v' to increase level of verbosity
          --log-file <file>: Log full debug output to file



.. py:class:: SimStep(config)

   Bases: :py:obj:`chipflow.platform.base.StepBase`


   Base class for ChipFlow build steps.


   .. py:method:: build_cli_parser(parser)

      Build the cli parser for this step



   .. py:method:: run_cli(args)

      Called when this step's is used from `chipflow` command



   .. py:method:: build(*args)

      Builds the simulation model for the design



   .. py:method:: run(*args)

      Run the simulation. Will ensure that the simulation and the software are both built.



   .. py:method:: check(*args)

      Run the simulation and check events against reference (tests/events_reference.json). Will ensure that the simulation and the software are both built.



.. py:class:: SoftwareStep(config)

   Bases: :py:obj:`chipflow.platform.base.StepBase`


   Base step to build the software.


   .. py:method:: build_cli_parser(parser)

      Build the cli parser for this step



   .. py:method:: run_cli(args)

      Called when this step's is used from `chipflow` command



   .. py:method:: build(*args)

      Build the software for your design



.. py:class:: BoardStep(config, platform)

   Bases: :py:obj:`chipflow.platform.base.StepBase`


   Build the design for a board.


   .. py:method:: build_cli_parser(parser)

      Build the cli parser for this step



   .. py:method:: run_cli(args)

      Called when this step's is used from `chipflow` command



   .. py:method:: build(*args)

      Build for the given platform



.. py:class:: IOSignature(**kwargs)

   Bases: :py:obj:`amaranth.lib.wiring.Signature`


   An :py:obj:`Amaranth Signature <amaranth.lib.wiring.Signature>` used to decorate wires that would usually be brought out onto a port on the package.
   This class is generally not directly used.  Instead, you would typically utilize the more specific
   :py:obj:`InputIOSignature`, :py:obj:`OutputIOSignature`, or :py:obj:`BidirIOSignature` for defining pin interfaces.


   .. py:property:: direction
      :type: amaranth.lib.io.Direction


      The direction of the IO port


   .. py:property:: width
      :type: int


      The width of the IO port, in wires


   .. py:property:: invert
      :type: collections.abc.Iterable[bool]


      A tuple as wide as the IO port, with a bool for the polarity inversion for each wire


   .. py:property:: options
      :type: IOModelOptions


      Options set on the io port at construction


